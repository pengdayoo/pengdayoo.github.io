<!DOCTYPE html>
<html>
<head>
    <title>鹏大的大鹏.Posts</title>
    <meta type="keyword" content='鹏大的大鹏,Blog'>
    <meta type="description" content='鹏大的大鹏.Under the bludgeonings of chance, My head is bloody, but unbowed.'>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="baidu-site-verification" content="code-E2HlntMuEe" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="bookmark" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href='https://pengda.me/assets/css/tagCloud.css'/>
    <script src='https://pengda.me/assets/js/tagCloud.js'></script>
    <link rel="stylesheet" href='https://pengda.me/assets/css/main.css'/>
    <link rel="canonical" href="https://pengda.me/posts/">
    <noscript><link rel="stylesheet" href='https://pengda.me/assets/css/noscript.css'/></noscript>
    <style>
        :root{--site-background : url("https://pengda.me/images/posts.jpg")};
    </style>
    
    
</head>


<body class="is-preload">

    
        <div id="wrapper">
    <header id="header">
        <div class="logo">
            <a href="/">
                <span class="icon">
                    
                        <img src="/images/pengdaRotateW.svg">
                    
                </span>
            </a>
        </div>
        <div class="content">
            <div class="inner">
                <h1>Posts</h1>
                
                <p>
                    Under the bludgeonings of chance, My head is bloody, but unbowed.
                </p>
                
            </div>
        </div>

        
    <nav>
        <ul>
            
                <li><a href="/posts/"> Posts </a></li>
            
                <li><a href="/categories/"> Categories </a></li>
            
                <li><a href="/series/"> Series </a></li>
            
                <li><a href="/tags/"> Tags </a></li>
            
                <li><a href="/#about"> About </a></li>
            
            
            
        </ul>
    </nav>
    </header>

    


    <div class="page">
        <ul class="pageList">
            
                <li>
                    <span>
                        
                        <a href='#linuxZshPlugins' alt="Rocky Linux设置zsh">
                            Rocky Linux设置zsh
                        </a>
                        
                    </span>
                </li>
                <li>
                    <span>
                        
                        <a href='#LinuxStaticNetwork' alt="Rocky Linux设置静态IP">
                            Rocky Linux设置静态IP
                        </a>
                        
                    </span>
                </li>
                <li>
                    <span>
                        
                        <a href='#VimConfig' alt="vim编辑器配置">
                            vim编辑器配置
                        </a>
                        
                    </span>
                </li>
                <li>
                    <span>
                        
                        <a href='#DockerPrune' alt="docker清理命令prune">
                            docker清理命令prune
                        </a>
                        
                    </span>
                </li>
                <li>
                    <span>
                        
                        <a href='#DockerRunMySQL' alt="Docker运行mysql设置密码问题">
                            Docker运行mysql设置密码问题
                        </a>
                        
                    </span>
                </li>
                <li>
                    <span>
                        
                        <a href='#DockerNoVim' alt="Docker容器中如何使用vi或者vim编辑器">
                            Docker容器中如何使用vi或者vim编辑器
                        </a>
                        
                    </span>
                </li>

        </ul>

        
        
            <ul class="pagination">
                
                    <li class="page-item">
                        <a href="/posts/" class="page-link" aria-label="First">
                            <span aria-hidden="true">First</span>
                        </a>
                    </li>
                
                <li class="page-item disabled">
                    <a  class="page-link" aria-label="Previous">
                        <span aria-hidden="true">Prev</span>
                    </a>
                </li>
                
                

                
                    
                    
                    

                    
                        
                        
                    

                    
                        <li class="page-item active">
                            <a class="page-link" href="/posts/">1</a>
                        </li>
                    
                
                    
                    
                    

                    
                        
                        
                    

                    
                        <li class="page-item">
                            <a class="page-link" href="/posts/page/2/">2</a>
                        </li>
                    
                
                <li class="page-item">
                    <a href="/posts/page/2/" class="page-link" aria-label="Next">
                        <span aria-hidden="true">Next</span>
                    </a>
                </li>
                
                    <li class="page-item">
                        <a href="/posts/page/2/" class="page-link" aria-label="Last">
                            <span aria-hidden="true">Last</span>
                        </a>
                    </li>
                
            </ul>
        
    </div>

    

    <div id="main">
        
            
                
                    
                    <article id='linuxZshPlugins'>
                        <h2 class="major">Rocky Linux设置zsh</h2>
                        
                            
                                <time datetime='2022-04-05T16:30:00&#43;0800' class="post-date">Create. 2022-04-05 16:30:00</time>
                            
                        
                        <span class="image main"><img src="" alt="" /></span>
                        <h2 id="rocky-linux安装并设置zsh插件">Rocky Linux安装并设置zsh插件</h2>
<h3 id="系统环境">系统环境：</h3>
<pre tabindex="0"><code>虚拟机：Parallels Desktop 17 for Mac  .Version 17.1.0(51516)
操作系统：Rocky Linux 8.5 (Green Obsidian) x86_64
Kernel：4.18.0-348.20.1.el8_5.x86_64
</code></pre><p><img src="/images/Rocky8.5-neofetch.png" alt="CentOS8-neofetch"></p>
<h3 id="操作过程">操作过程</h3>
<h4 id="1安装zsh">1.安装zsh</h4>
<pre tabindex="0"><code>yum install zsh
</code></pre><h4 id="2切换zsh">2.切换zsh</h4>
<pre tabindex="0"><code>chsh -s /bin/zsh

不想用了切回
chsh -s /bin/bash
</code></pre><h4 id="3下载插件">3.下载插件</h4>
<pre tabindex="0"><code>自动补全命令：
说明：zsh-autosuggestions，会从历史命令中给出命令提示，按tab可补全命令

git clone https://github.com/zsh-users/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions

高亮插件：
说明：zsh-syntax-highlighting，正确的命令绿色，错误的命令红色

git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting
</code></pre><h4 id="4特殊命令autojump使用j-path即可快速跳转到历史进入过的目录">4.特殊命令autojump，使用j path即可快速跳转到历史进入过的目录</h4>
<pre tabindex="0"><code>git clone https://github.com/wting/autojump.git ~/autojump

cd ~/autojump

./install.py

将

[ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh

写入到
~/.zshrc
</code></pre><h5 id="注意安装autojump报错处理">注意：安装autojump报错处理</h5>
<p>执行：./install.py如果报错，请参考下面步骤处理</p>
<pre tabindex="0"><code>/usr/bin/env: ‘python’: No such file or directory
</code></pre><p>1.检测是否已安装python</p>
<pre tabindex="0"><code>which python
</code></pre><p>2.提示找不到命令可以尝试看看是否有python2 python3等命令，
不存在则先安装python，存在跳过这一步</p>
<pre tabindex="0"><code>yum install python
</code></pre><p>3.存在python2或者python3则进行如下操作</p>
<pre tabindex="0"><code>cd /usr/bin

ln -s python2.7 python
</code></pre><p>4.再次执行脚本安装即可</p>
<pre tabindex="0"><code>./install.py
</code></pre><h4 id="5编辑zshrc">5.编辑~/.zshrc</h4>
<pre tabindex="0"><code>vim ~/.zshrc

将
zsh-autosuggestions、zsh-syntax-highlighting
插件加入到plugins配置中

增加后如下
plugins=(
        git
        zsh-autosuggestions
        zsh-syntax-highlighting
)

保存后执行
source ~/.zshrc
</code></pre><p>可以根据自己的需求可以增加其他插件到zsh配置中。</p>

                    </article>
                
            
        
            
                
                    
                    <article id='LinuxStaticNetwork'>
                        <h2 class="major">Rocky Linux设置静态IP</h2>
                        
                            
                                <time datetime='2022-04-05T14:58:48&#43;0800' class="post-date">Create. 2022-04-05 14:58:48</time>
                            
                        
                        <span class="image main"><img src="" alt="" /></span>
                        <h2 id="虚拟机安装rocky-linux后设置网络静态ip">虚拟机安装Rocky Linux后设置网络、静态IP</h2>
<h3 id="系统环境">系统环境：</h3>
<pre tabindex="0"><code>虚拟机：Parallels Desktop 17 for Mac  .Version 17.1.0(51516)
操作系统：Rocky Linux 8.5 (Green Obsidian) x86_64
Kernel：4.18.0-348.20.1.el8_5.x86_64
</code></pre><p><img src="/images/Rocky8.5-neofetch.png" alt="CentOS8-neofetch"></p>
<h3 id="操作过程">操作过程</h3>
<h4 id="1进入网络配置目录">1.进入网络配置目录</h4>
<pre tabindex="0"><code>cd /etc/sysconfig/network-scripts/
</code></pre><h4 id="2编辑网络配置文件文件名一般为ifcfg-enp0s开头后面是0-9的数字这里我的是ifcfg-enp0s5">2.编辑网络配置文件（文件名一般为ifcfg-enp0s开头，后面是0-9的数字，这里我的是ifcfg-enp0s5）</h4>
<pre tabindex="0"><code>vim ifcfg-enp0s5
</code></pre><h4 id="3内容一般如下">3.内容一般如下</h4>
<pre tabindex="0"><code>TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
NAME=enp0s5
UUID=83ae****-7c**-49**-9f**-8f1a25******
DEVICE=enp0s5
ONBOOT=yes
</code></pre><h4 id="4修改内容为">4.修改内容为</h4>
<pre tabindex="0"><code>将
BOOTPROTO=dhcp

修改为
BOOTPROTO=static

不放心可以先将BOOTPROTO=dhcp注释，前面加#即可，查看6.修改后的内容为
</code></pre><h4 id="5添加内容为">5.添加内容为</h4>
<pre tabindex="0"><code>IPADDR=10.211.55.5
GATEWAY=10.211.55.1
NETMASK=255.255.255.0
DNS1=10.211.55.1
</code></pre><h4 id="6修改后的内容为">6.修改后的内容为</h4>
<pre tabindex="0"><code>TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
#BOOTPROTO=dhcp
BOOTPROTO=static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
NAME=enp0s5
UUID=83ae****-7c**-49**-9f**-8f1a25******
DEVICE=enp0s5
ONBOOT=yes

IPADDR=10.211.55.5
GATEWAY=10.211.55.1
NETMASK=255.255.255.0
DNS1=10.211.55.1
</code></pre><h3 id="注意">注意：</h3>
<h4 id="1每个人的环境有所不同请根据自己的虚拟机分配的ip地址更改为您自己的ip地址">1.每个人的环境有所不同，请根据自己的虚拟机分配的IP地址更改为您自己的IP地址</h4>
<h4 id="2如果您的onboot参数默认为no请按照下面修改">2.如果您的ONBOOT参数默认为no，请按照下面修改</h4>
<pre tabindex="0"><code>将
ONBOOT=no

请修改为
ONBOOT=yes
</code></pre>
                    </article>
                
            
        
            
                
                    
                    <article id='VimConfig'>
                        <h2 class="major">vim编辑器配置</h2>
                        
                            
                                <time datetime='2021-07-02T14:17:11&#43;0800' class="post-date">Create. 2021-07-02 14:17:11</time>
                            
                        
                        <span class="image main"><img src="" alt="" /></span>
                        <h2 id="个人使用的vim编辑器配置文件带说明">个人使用的vim编辑器配置文件带说明</h2>
<h3 id="系统环境">系统环境：</h3>
<pre tabindex="0"><code>虚拟机：Parallels Desktop 16 for Mac  .Version 16.1.2(49151)
操作系统：CentOS Linux release 8.4.2105
</code></pre><p><img src="/images/CentOS8-neofetch.png" alt="CentOS8-neofetch"></p>
<h3 id="配置文件">配置文件：</h3>
<pre tabindex="0"><code>&#34; Configuration file for vim
set modelines=0         &#34; CVE-2007-2438

&#34; Normally we use vim-extensions. If you want true vi-compatibility
&#34; remove change the following statements
set nocompatible        &#34; Use Vim defaults instead of 100% vi compatibility
set backspace=indent,eol,start
set backspace=2         &#34; more powerful backspacing

&#34; Don&#39;t write backup file if vim is being called by &#34;crontab -e&#34;
au BufWrite /private/tmp/crontab.* set nowritebackup nobackup
&#34; Don&#39;t write backup file if vim is being called by &#34;chpass&#34;
au BufWrite /private/etc/pw.* set nowritebackup nobackup

&#34; 语法高亮显示
syntax on
set fileencodings=utf-8,gb2312,gbk,cp936,latin-1
set fileencoding=utf-8
set termencoding=utf-8
set fileformat=unix
set encoding=utf-8

&#34; 显示行号      同 set number
set nu!
filetype on

&#34; 历史记录条数
set history=1000

&#34; set background=dark

&#34; 启用自动对齐功能,把上一行的对齐格式应用到下一行
set autoindent

&#34; 根据上面的格式,只能的选择对齐方式,对于类似C语言编写很有用处
set smartindent

&#34; vim禁用自动备份
set nobackup
set nowritebackup
set noswapfile

&#34; 用空格代替tab
set expandtab
&#34; 不用空格代替tab
&#34; set noexpandtab
&#34; 设置显示制表符的空格字符个数,改进tab缩进值,默认为8,现改为4
set tabstop=4
&#34;统一缩进为4，方便在开启了et后使用退格(backspace)键，每次退格将删除X个空格
set softtabstop=4
&#34; 设定自动缩进为4个字符，程序中自动缩进所使用的空白长度
set shiftwidth=4

&#34; 设置帮助文件为中文(需要安装vimcdoc文档)
set helplang=cn

&#34; 显示匹配的括号
set showmatch

&#34; 文件缩进及tab个数
au FileType html,python,vim,javascript setl shiftwidth=4
au FileType html,python,vim,javascript setl tabstop=4
au FileType java,php setl shiftwidth=4
au FileType java,php setl tabstop=4

&#34; 高亮搜索的字符串
set hlsearch

&#34; 检测文件的类型
filetype off
filetype plugin on
filetype indent on

&#34; C风格缩进
set cindent
set completeopt=longest,menu

&#34; 功能设置

&#34; 去掉输入错误提示声音
set noeb
&#34; 自动保存
&#34; set autowrite
&#34; 突出显示当前行 
set cursorline

&#34; set ai!
set showmatch

&#34; 显示标尺
set ruler

&#34; 输入的命令显示出来,看的清楚些
set showcmd

&#34; 状态行显示的内容
set statusline=%F%m%r%h%w\ [FORMAT=%{&amp;ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\&#34;%d/%m/%y\ -\ %H:%M\&#34;)}

&#34; 启动显示状态行1,总是显示状态行2
set laststatus=2

&#34; 配色方案
&#34; colorscheme desert

&#34; 指定配色方案是256色
set t_Co=256

set wildmenu

&#34; 设置光标样式为竖线vertical bar
&#34; Change cursor shape between insert and normal mode in iTerm2.app
&#34; if $TERM_PROGRAM =~ &#34;iTerm&#34;
&#34; let &amp;t_SI = &#34;\&lt;Esc&gt;]50;CursorShape=1\x7&#34; &#34; Vertical bar in insert mode
&#34; let &amp;t_EI = &#34;\&lt;Esc&gt;]50;CursorShape=0\x7&#34; &#34; Block in normal mode
&#34; endif
&#34; 共享剪贴板
set clipboard+=unnamed
&#34; 文件被改动时自动载入
set autoread
&#34; 顶部底部保持3行距离
set scrolloff=3
</code></pre>
                    </article>
                
            
        
            
                
                    
                    <article id='DockerPrune'>
                        <h2 class="major">docker清理命令prune</h2>
                        
                            
                                <time datetime='2021-07-02T11:06:12&#43;0800' class="post-date">Create. 2021-07-02 11:06:12</time>
                            
                        
                        <span class="image main"><img src="" alt="" /></span>
                        <h2 id="docker使用中会产生很多冗余的镜像容器和数据卷那么怎么来清理这些冗余呢">Docker使用中会产生很多冗余的镜像、容器和数据卷，那么怎么来清理这些冗余呢？</h2>
<h3 id="系统环境">系统环境：</h3>
<pre tabindex="0"><code>虚拟机：Parallels Desktop 16 for Mac  .Version 16.1.2(49151)
操作系统：CentOS Linux release 8.4.2105
Docker：20.10.7, build f0df350
</code></pre><p><img src="/images/CentOS8-neofetch.png" alt="CentOS8-neofetch"></p>
<h3 id="常用清理命令参考">常用清理命令参考：</h3>
<h4 id="清理所有未使用的镜像容器和数据卷不懂该命令请慎用">清理所有未使用的镜像、容器和数据卷（不懂该命令请慎用）：</h4>
<pre tabindex="0"><code>docker system prune
</code></pre><h4 id="查看所有悬挂状态的镜像">查看所有悬挂状态的镜像：</h4>
<pre tabindex="0"><code>docker image ls -f dangling=true
</code></pre><h4 id="清理所有悬挂状态的镜像">清理所有悬挂状态的镜像：</h4>
<pre tabindex="0"><code>docker image prune

OR

docker image rm $(docker image ls -f dangling=true -q)
</code></pre><h4 id="删除所有停止状态的容器">删除所有停止状态的容器：</h4>
<pre tabindex="0"><code>docker container prune
</code></pre><h4 id="删除所有容器你的所有容器会被清空慎用">删除所有容器（你的所有容器会被清空，慎用）</h4>
<pre tabindex="0"><code>docker rm -f $(docker ps -aq)

OR

docker container rm -f $(docker container ls -aq)
</code></pre><h4 id="删除不再使用的数据卷">删除不再使用的数据卷</h4>
<pre tabindex="0"><code>docker volume rm $(docker volume ls -q)

OR

docker volume prune
</code></pre><h4 id="删除构建缓存">删除构建缓存</h4>
<pre tabindex="0"><code>docker builder prune
</code></pre>
                    </article>
                
            
        
            
                
                    
                    <article id='DockerRunMySQL'>
                        <h2 class="major">Docker运行mysql设置密码问题</h2>
                        
                            
                                <time datetime='2021-07-02T09:09:12&#43;0800' class="post-date">Create. 2021-07-02 09:09:12</time>
                            
                        
                        <span class="image main"><img src="" alt="" /></span>
                        <h2 id="docker运行mysql时必须提供一个初始化密码但是有的开发者是本地测试使用所以不想加密码该如何操作呢">Docker运行mysql时，必须提供一个初始化密码，但是有的开发者是本地测试使用，所以不想加密码该如何操作呢？</h2>
<h3 id="系统环境">系统环境：</h3>
<pre tabindex="0"><code>虚拟机：Parallels Desktop 16 for Mac  .Version 16.1.2(49151)
操作系统：CentOS Linux release 8.4.2105
Docker：20.10.7, build f0df350
MySQL：5.7
</code></pre><p><img src="/images/CentOS8-neofetch.png" alt="CentOS8-neofetch"></p>
<h3 id="解决方案">解决方案：</h3>
<p>执行以下命令即可，连接mysql不需要填写密码便能连接上</p>
<pre tabindex="0"><code>docker run --name mysql57 \
-e MYSQL_ALLOW_EMPTY_PASSWORD=yes \
-p 3306:3306 \
-d mysql:5.7
</code></pre><h3 id="参数参考">参数参考：</h3>
<p>运行容器时设置root密码为：123456</p>
<pre tabindex="0"><code>docker run --name mysql57 \
-e MYSQL_ROOT_PASSWORD=123456 \
-p 3306:3306 \
-d mysql:5.7
</code></pre><p>运行容器时创建一个新的用户，并将root密码设置为随机，一般使用场景为单个项目数据库使用唯一的账号密码来管理：</p>
<pre tabindex="0"><code>docker run --name=mysqlBlog \
-e MYSQL_DATABASE=blog \
-e MYSQL_USER=blog \
-e MYSQL_PASSWORD=blog \
-e MYSQL_RANDOM_ROOT_PASSWORD=yes \
-p 3306:3306 \
-d mysql:5.7
</code></pre>
                    </article>
                
            
        
            
                
                    
                    <article id='DockerNoVim'>
                        <h2 class="major">Docker容器中如何使用vi或者vim编辑器</h2>
                        
                            
                                <time datetime='2021-07-01T17:46:11&#43;0800' class="post-date">Create. 2021-07-01 17:46:11</time>
                            
                        
                        <span class="image main"><img src="" alt="" /></span>
                        <h2 id="docker容器没有安装vi或者vim编辑器导致提示command-not-found">Docker容器没有安装vi或者vim编辑器，导致提示：command not found</h2>
<h3 id="系统环境">系统环境：</h3>
<pre tabindex="0"><code>虚拟机：Parallels Desktop 16 for Mac  .Version 16.1.2(49151)
操作系统：CentOS Linux release 8.4.2105
Docker：20.10.7, build f0df350
</code></pre><p><img src="/images/CentOS8-neofetch.png" alt="CentOS8-neofetch"></p>
<h3 id="解决方案">解决方案：</h3>
<p>依次执行以下命令即可</p>
<pre tabindex="0"><code>apt-get update
apt-get install vim -y
</code></pre>
                    </article>
                
            
        
    </div>


            
<footer id="footer">
    <p class="copyright">&copy; 2022 PengDa . <a href="/index.xml"> RSS </a></li></p>
</footer>

        </div>

    
    <div id="bg"></div>

</body>


    
    <script src=https://pengda.me/assets/js/jquery.min.js></script>
    <script src=https://pengda.me/assets/js/browser.min.js></script>
    <script src=https://pengda.me/assets/js/breakpoints.min.js></script>
    <script src=https://pengda.me/assets/js/util.js></script>
    <script src=https://pengda.me/assets/js/main.js></script>

</html>
